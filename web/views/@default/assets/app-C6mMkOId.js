import{r as k,o as t,g as i,u as e,c as P,L as x,h as a,f as m,t as r,a as p,b as u,F as $,D as L,w as h,i as b}from"./app-DjYJfrF8.js";import{i as g,u as w,c as z}from"./app-C1XH7PtB.js";import{_ as S,a as C}from"./app-iFOqw02O.js";import{_ as B}from"./app-BV2rgPOF.js";import{L as N,s as y}from"./app-BOEypwYT.js";import{_ as M}from"./app-CyF-K2SP.js";import"./app-D3zb-bsA.js";import"./app-BUF1jp6-.js";import"./app-C957O1lC.js";import"./app-DPFGrewt.js";import"./app-DPmFMerm.js";import"./app-BDyHR7S0.js";import"./app-DQcJZ4rR.js";import"./app-BZpo3xeX.js";import"./app-3rCQf5Hi.js";import"./app-C8URsP3D.js";import"./app-__35K3dS.js";import"./app-l8Q5NmGb.js";import"./app-CMrnp7LG.js";import"./app-CQoUplHC.js";import"./app-DYZ72m3h.js";import"./app-zaKueCu1.js";import"./app-CXb0aRmx.js";import"./app-PXD802g2.js";import"./app-DqyEP-Ic.js";import"./app-Bx1vQSc6.js";import"./app-g_ZjR39Z.js";import"./app-BOdfUA0H.js";import"./app-RjwKLjbv.js";import"./app-B3JHJgWn.js";import"./app-C6feLE3_.js";import"./app-CMoUOWYK.js";function U(){const{utils:_}=g(this);this.deleteUserPlan=function(c){_.confirm("确定要删除此套餐吗？",function(){this.$post(".delete").params({userPlanId:c}).refresh()})},this.renewUserPlan=function(c){_.popupSuccess(".renewPopup?userPlanId="+c)}}const R={style:{"font-size":"0.8em",color:"grey"}},T={key:1},V={key:0},W=p("br",null,null,-1),q={key:1},I=p("br",null,null,-1),D={key:2},F={key:3},O={key:4},E={key:5},G={key:6},j={__name:"PlanLimitView",props:["value","v-single-mode"],setup(_){const c=w(),l=_,{config:o,hasLimit:n}=function(){let d=l.value,f=!1;return l.vSingleMode||(d.trafficLimit!=null&&d.trafficLimit.isOn&&(d.trafficLimit.dailySize!=null&&d.trafficLimit.dailySize.count>0||d.trafficLimit.monthlySize!=null&&d.trafficLimit.monthlySize.count>0)||d.dailyRequests>0||d.monthlyRequests>0)&&(f=!0),{config:k(d),hasLimit:k(f)}}(),s=function(d){return c.formatNumber(d)},v=function(d){return c.convertSizeCapacityToString(d)};return(d,f)=>(t(),i("div",R,[e(n)?(t(),P(x,{key:0})):a("",!0),e(o).trafficLimit!=null&&e(o).trafficLimit.isOn?(t(),i("div",T,[e(o).trafficLimit.dailySize!=null&&e(o).trafficLimit.dailySize.count>0?(t(),i("span",V,[m("日流量限制："+r(v(e(o).trafficLimit.dailySize)),1),W])):a("",!0),e(o).trafficLimit.monthlySize!=null&&e(o).trafficLimit.monthlySize.count>0?(t(),i("span",q,[m("月流量限制："+r(v(e(o).trafficLimit.monthlySize)),1),I])):a("",!0)])):a("",!0),e(o).dailyRequests>0?(t(),i("div",D,"单日请求数限制："+r(s(e(o).dailyRequests)),1)):a("",!0),e(o).monthlyRequests>0?(t(),i("div",F,"单月请求数限制："+r(s(e(o).monthlyRequests)),1)):a("",!0),e(o).dailyWebsocketConnections>0?(t(),i("div",O,"单日Websocket限制："+r(s(e(o).dailyWebsocketConnections)),1)):a("",!0),e(o).monthlyWebsocketConnections>0?(t(),i("div",E,"单月Websocket限制："+r(s(e(o).monthlyWebsocketConnections)),1)):a("",!0),e(o).maxUploadSize!=null&&e(o).maxUploadSize.count>0?(t(),i("div",G,"文件上传限制："+r(v(e(o).maxUploadSize)),1)):a("",!0)]))}},A={key:0,style:{"font-size":"0.8em",color:"grey"}},H={__name:"PlanBandwidthLimitView",props:["value"],setup(_){return(c,l)=>_.value!=null&&_.value.bandwidthLimitPerNode!=null&&_.value.bandwidthLimitPerNode.count>0?(t(),i("div",A,[m(" 带宽限制： "),u(S,{"v-value":_.value.bandwidthLimitPerNode},null,8,["v-value"])])):a("",!0)}},J={key:0},K={class:"grey small"},Q={key:0},X=p("br",null,null,-1),Y={key:1},Z=p("br",null,null,-1),ee={key:2},te={key:1},ie={class:"grey small"},ne={key:2},se={class:"small grey"},oe={key:0},ae={key:1},re={key:2},le={key:3},ce={__name:"PlanPriceView",props:["v-plan"],setup(_){const c=_,{plan:l}=function(){return{plan:k(c.vPlan)}}();return(o,n)=>(t(),i("div",null,[e(l).priceType=="period"?(t(),i("div",J,[m(" 按时间周期计费 "),p("div",null,[p("span",K,[e(l).monthlyPrice>0?(t(),i("span",Q,[m("月度：￥"+r(e(l).monthlyPrice)+"元",1),X])):a("",!0),e(l).seasonallyPrice>0?(t(),i("span",Y,[m("季度：￥"+r(e(l).seasonallyPrice)+"元",1),Z])):a("",!0),e(l).yearlyPrice>0?(t(),i("span",ee,"年度：￥"+r(e(l).yearlyPrice)+"元",1)):a("",!0)])])])):a("",!0),e(l).priceType=="traffic"?(t(),i("div",te,[m(" 按流量计费 "),p("div",null,[p("span",ie,"基础价格：￥"+r(e(l).trafficPrice.base)+"元/GiB",1)])])):a("",!0),e(l).priceType=="bandwidth"&&e(l).bandwidthPrice!=null&&e(l).bandwidthPrice.percentile>0?(t(),i("div",ne,[m(" 按"+r(e(l).bandwidthPrice.percentile)+"th带宽计费 ",1),p("div",null,[(t(!0),i($,null,L(e(l).bandwidthPrice.ranges,s=>(t(),i("div",null,[p("span",se,[m(r(s.minMB)+" - ",1),s.maxMB>0?(t(),i("span",oe,r(s.maxMB)+"MiB",1)):(t(),i("span",ae,"∞")),m("： "),s.totalPrice>0?(t(),i("span",re,r(s.totalPrice)+"元",1)):(t(),i("span",le,r(s.pricePerMB)+"元/MiB",1))])]))),256))])])):a("",!0)]))}},de={key:1},ue={key:0},me={key:1,class:"red"},_e={key:0},pe={key:1,class:"disabled"},he={key:0},ye={key:0},fe=["href"],ve=["href"],ke={key:1,class:"disabled"},$e=["onClick"],be=["onClick"],et={__name:"index",setup(_){const c=z(new U);return(l,o)=>(t(),i($,null,[u(C,{ctx:e(c)},null,8,["ctx"]),e(c).userPlans.length==0?(t(),P(M,{key:0,"disable-spacing":""},{default:h(()=>[m("暂时还没有已购套餐。")]),_:1})):a("",!0),e(c).userPlans.length>0?(t(),i("div",de,[u(N,{items:e(c).userPlans},{default:h(()=>[u(e(y),{header:"套餐",class:"name-column",frozen:""},{body:h(({data:n})=>[n.plan.id>0?(t(),i("span",ue,r(n.plan.name),1)):(t(),i("span",me,"[已删除]"))]),_:1}),u(e(y),{header:"备注名",class:"name-column"},{body:h(({data:n})=>[n.name.length>0?(t(),i("span",_e,r(n.name),1)):(t(),i("span",pe,"-"))]),_:1}),u(e(y),{header:"价格",class:"name-column"},{body:h(({data:n})=>[n.plan!=null?(t(),i("div",he,[u(ce,{"v-plan":n.plan},null,8,["v-plan"]),u(j,{value:n.plan},null,8,["value"]),u(H,{value:n.plan},null,8,["value"])])):a("",!0)]),_:1}),u(e(y),{header:"有效期",class:"date-column"},{body:h(({data:n})=>[m(r(n.dayTo),1)]),_:1}),u(e(y),{header:"网站",class:"name-column"},{body:h(({data:n})=>[n.servers!=null&&n.servers.length>0?(t(),i("div",ye,[(t(!0),i($,null,L(n.servers,s=>(t(),i("div",null,[s.type=="httpProxy"||s.type=="httpWeb"?(t(),i("a",{key:0,href:"/servers/server/settings/plan?serverId="+s.id},r(s.name),9,fe)):a("",!0),s.type=="tcpProxy"||s.type=="udpProxy"?(t(),i("a",{key:1,href:"/lb/server/settings/plan?serverId="+s.id},r(s.name),9,ve)):a("",!0)]))),256))])):(t(),i("span",ke,"尚未绑定"))]),_:1}),u(e(y),{header:"操作",class:"two op",frozen:"","align-frozen":"right"},{body:h(({data:n})=>[p("a",{href:"",onClick:b(s=>e(c).renewUserPlan(n.id),["prevent"])},"续费",8,$e),m("   "),p("a",{href:"",onClick:b(s=>e(c).deleteUserPlan(n.id),["prevent"])},"删除",8,be)]),_:1})]),_:1},8,["items"]),u(B,{data:e(c).page},null,8,["data"])])):a("",!0)],64))}};export{et as default};
