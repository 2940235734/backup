import{o as a,g as o,j as I,f as c,a as d,i as f,b as r,u as t,c as k,w as l,h as u,d as b,e as $,F as v,D as y,t as p,n as V}from"./app-DjYJfrF8.js";import{i as N,u as x,c as w}from"./app-C1XH7PtB.js";import{_ as O}from"./app-BtuR6J8t.js";import{T as P}from"./app-RjwKLjbv.js";import{W as T}from"./app-Brmd7FEP.js";import{_ as E}from"./app-mO6x4u2P.js";import{_ as U,a as C}from"./app-BpjMg_gY.js";import{T as g}from"./app-DA-qpgNO.js";import{_ as S}from"./app-BWoLk5mp.js";import{_ as B}from"./app-DARP0P5r.js";import{_ as L}from"./app-BNIYKx-R.js";import{_ as z}from"./app-Da0UoovQ.js";import{_ as D}from"./app-BV2rgPOF.js";import{L as M,s as _}from"./app-BOEypwYT.js";import{_ as A}from"./app-CyF-K2SP.js";import"./app-D3zb-bsA.js";import"./app-BUF1jp6-.js";import"./app-C957O1lC.js";import"./app-DPFGrewt.js";import"./app-DPmFMerm.js";import"./app-BDyHR7S0.js";import"./app-DQcJZ4rR.js";import"./app-B3JHJgWn.js";import"./app-__35K3dS.js";import"./app-C6feLE3_.js";import"./app-CMrnp7LG.js";import"./app-CMoUOWYK.js";import"./app-DYZ72m3h.js";import"./app-3rCQf5Hi.js";import"./app-C8URsP3D.js";import"./app-l8Q5NmGb.js";import"./app-CQoUplHC.js";import"./app-zaKueCu1.js";import"./app-DqyEP-Ic.js";import"./app-BZpo3xeX.js";import"./app-CXb0aRmx.js";import"./app-PXD802g2.js";import"./app-Bx1vQSc6.js";import"./app-g_ZjR39Z.js";import"./app-BOdfUA0H.js";function F(){const{utils:m,Tea:s}=N(this);this.$delay(function(){this.loadStatus()}),this.loadStatus=function(){let n=this.servers.map(function(i){return i.id});this.$post(".status").params({serverIds:n}).timeout(300).success(function(i){let e=i.data.status;this.servers.forEach(function(h){typeof e[h.id]=="object"&&(h.status=e[h.id])})})},this.deleteServer=function(n){let i=this;m.confirm("确定要删除此网站吗？",function(){i.$post(".delete").params({serverId:n}).refresh()})},this.updateServerOn=function(n){let i=this;m.confirm("确定要启用此网站吗？",function(){i.$post(".updateOn").params({serverId:n,isOn:!0}).refresh()})},this.updateServerOff=function(n){let i=this;m.confirm("确定要停用此网站吗？",function(){i.$post(".updateOn").params({serverId:n,isOn:!1}).refresh()})},this.updateServerName=function(n){m.popup("/servers/updateNamePopup?serverId="+n,{callback:function(){m.success("保存成功",function(){m.reload()})}})},this.checkedServerIds=[],this.allChecked=!1,this.changeAllChecked=function(n){this.servers.forEach(i=>{i.isChecked=n}),this.updateCheckedServers()},this.changeServerChecked=function(){this.updateCheckedServers()},this.updateCheckedServers=function(){let n=[];this.servers.forEach(i=>{i.isChecked&&n.push(i.id)}),this.checkedServerIds=n},this.resetCheckedServers=function(){this.servers.forEach(n=>{n.isChecked=!1}),this.allChecked=!1,this.updateCheckedServers()},this.deleteServers=function(){let n=this;m.confirm("确定要删除所选的"+this.checkedServerIds.length+"个网站吗？",function(){n.$post(".deleteServers").params({serverIds:this.checkedServerIds}).success(function(){m.reload()})})}}const j=["title"],H=d("i",{class:"pi pi-expand small"},null,-1),W=[H],Y={__name:"PopupIcon",props:["title","href","height"],setup(m){const s=x(),n=m,i=function(){n.href!=null&&n.href.length>0&&s.popup(n.href,{height:n.height})};return(e,h)=>(a(),o("span",null,[I(e.$slots,"default"),c(" "),d("a",{href:"",title:m.title,onClick:f(i,["prevent"])},W,8,j)]))}},R=d("a",{href:"/finance/bills?paidFlag=0"},"有逾期未支付的账单，可能会影响你的CDN服务正常运行，请尽快完成支付。",-1),q={action:"/servers"},G={class:"ui fields inline"},J={class:"ui field"},K={key:0,class:"ui field"},Q={class:"ui field"},X={key:0,href:"/servers"},Z={key:3},ee={key:4,class:"mt-4"},te=["href"],se={key:0},ae={key:0},oe={key:1},ne={key:2},ie={key:1,class:"disabled"},re={class:"server-name-box inline-block ml-2"},le={class:"grey small flex items-center gap-1"},de=d("i",{class:"icon tag small"},null,-1),ce=["onClick"],ue={key:0},he={key:0},me={key:1},pe={key:2},_e={style:{"margin-top":"1em"},class:"small grey"},fe={key:0,class:"grey"},ke={key:1,class:"green"},ve={key:2},ge={key:3,class:"red flex items-center gap-1"},ye={key:0,class:"green"},Ce={key:0,class:"green"},Se=["href"],Ie=["onClick"],be=["onClick"],$e=d("span",{class:"red"},"启用",-1),Ve=[$e],Ne=["onClick"],pt={__name:"index",setup(m){const s=w(new F);return(n,i)=>(a(),o(v,null,[r(O,{"active-tab":"index"}),t(s).serversIsEnabled?u("",!0):(a(),k(P,{key:0,error:""},{default:l(()=>[c(" 当前账号下的网站不可用，请检查账号状态以及是否有逾期未支付的账单。 ")]),_:1})),t(s).serversIsEnabled&&t(s).countUnpaidBills>0?(a(),k(T,{key:1},{default:l(()=>[R]),_:1})):u("",!0),b(d("form",q,[d("div",G,[d("div",J,[r(E,{name:"keyword",modelValue:t(s).keyword,"onUpdate:modelValue":i[0]||(i[0]=e=>t(s).keyword=e),placeholder:"域名"},null,8,["modelValue"])]),t(s).groups.length>0?(a(),o("div",K,[r(U,{name:"groupId",modelValue:t(s).groupId,"onUpdate:modelValue":i[1]||(i[1]=e=>t(s).groupId=e)},{default:l(()=>[r(C,{value:"0"},{default:l(()=>[c("[分组]")]),_:1}),(a(!0),o(v,null,y(t(s).groups,e=>(a(),k(C,{value:e.id},{default:l(()=>[c(p(e.name),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])])):u("",!0),d("div",Q,[r(g,{type:"submit",secondary:""},{default:l(()=>[c("搜索")]),_:1}),c("   "),t(s).keyword.length>0||t(s).groupId>0?(a(),o("a",X,"[清除条件]")):u("",!0)])])],512),[[$,t(s).checkedServerIds.length==0]]),t(s).servers.length==0?(a(),k(A,{key:2},{default:l(()=>[c("暂时还没有任何网站。")]),_:1})):u("",!0),t(s).checkedServerIds.length>0?(a(),o("div",Z,[r(g,{secondary:"",outlined:"",onClick:f(t(s).resetCheckedServers,["prevent"])},{default:l(()=>[c("取消所选")]),_:1},8,["onClick"]),c("     "),r(g,{secondary:"",outlined:"",onClick:f(t(s).deleteServers,["prevent"])},{default:l(()=>[c("删除所选"+p(t(s).checkedServerIds.length)+"网站",1)]),_:1},8,["onClick"])])):u("",!0),t(s).servers.length>0?(a(),o("div",ee,[r(M,{items:t(s).servers},{default:l(()=>[r(t(_),{style:{width:"1em"},class:"server-checkbox-td",frozen:""},{header:l(()=>[r(S,{onChange:t(s).changeAllChecked,modelValue:t(s).allChecked,"onUpdate:modelValue":i[2]||(i[2]=e=>t(s).allChecked=e)},null,8,["onChange","modelValue"])]),body:l(({data:e})=>[r(S,{modelValue:e.isChecked,"onUpdate:modelValue":h=>e.isChecked=h,onChange:t(s).changeServerChecked},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),r(t(_),{header:"域名",class:"domain-column server-td",frozen:""},{body:l(({data:e})=>[d("a",{href:"/servers/server?serverId="+e.id},[e.serverNames.length>0?(a(),o("span",se,[e.serverNames[0].subNames==null||e.serverNames[0].subNames.length==0?(a(),o("span",ae,[r(B,{"v-word":t(s).keyword},{default:l(()=>[c(p(e.serverNames[0].name),1)]),_:2},1032,["v-word"])])):(a(),o("span",oe,p(e.serverNames[0].subNames[0]),1)),e.countServerNames>1?(a(),o("span",ne,[c("等"+p(e.countServerNames)+"个域名 ",1),r(Y,{href:"/servers/serverNamesPopup?serverId="+e.id,height:"30em"},null,8,["href"])])):u("",!0)])):(a(),o("span",ie,"-"))],8,te),d("span",re,[d("span",le,[de,d("span",null,p(e.name),1),c("   "),d("a",{href:"",onClick:f(h=>t(s).updateServerName(e.id),["prevent"])},"[修改]",8,ce)])]),e.userPlan!=null&&e.userPlan.id>0?(a(),o("div",ue,[d("span",{style:{"margin-top":"1em"},class:V(["small",{grey:!e.userPlan.isExpired,red:e.userPlan.isExpired}])},[c("套餐："+p(e.userPlan.name)+" / "+p(e.userPlan.dayTo)+" ",1),e.userPlan.isExpired?(a(),o("span",he,"已过期")):u("",!0)],2)])):u("",!0),e.trafficLimitStatus!=null?(a(),o("div",me,[r(L,{modelValue:e.trafficLimitStatus,"onUpdate:modelValue":h=>e.trafficLimitStatus=h},null,8,["modelValue","onUpdate:modelValue"])])):u("",!0),e.groups.length>0?(a(),o("div",pe,[(a(!0),o(v,null,y(e.groups,h=>(a(),o("span",_e,"["+p(h.name)+"]   ",1))),256))])):u("",!0)]),_:1}),r(t(_),{header:"CNAME",class:"domain-column"},{body:l(({data:e})=>[c(p(e.cname),1)]),_:1}),r(t(_),{header:"状态",class:"status-column"},{body:l(({data:e})=>[e.isOn?e.status.isOk?(a(),o("span",ke,"正常")):e.status.message.length==0?(a(),o("span",ve,"检查中")):(a(),o("span",ge,[d("span",null,p(e.status.message),1),r(z,{content:e.status.todo},null,8,["content"])])):(a(),o("span",fe,"停用中"))]),_:1}),r(t(_),{header:"HTTP",class:"bool-column"},{body:l(({data:e})=>[e.httpIsOn?(a(),o("span",ye,"Y")):u("",!0)]),_:1}),r(t(_),{header:"HTTPS",class:"bool-column"},{body:l(({data:e})=>[e.httpsIsOn?(a(),o("span",Ce,"Y")):u("",!0)]),_:1}),r(t(_),{header:"操作",class:"three op",frozen:"","align-frozen":"right"},{body:l(({data:e})=>[d("a",{href:"/servers/server?serverId="+e.id},"管理",8,Se),c("   "),e.isOn?(a(),o("a",{key:0,href:"",onClick:f(h=>t(s).updateServerOff(e.id),["prevent"])},"停用",8,Ie)):u("",!0),e.isOn?u("",!0):(a(),o("a",{key:1,href:"",onClick:f(h=>t(s).updateServerOn(e.id),["prevent"])},Ve,8,be)),c("   "),d("a",{href:"",onClick:f(h=>t(s).deleteServer(e.id),["prevent"])},"删除",8,Ne)]),_:1})]),_:1},8,["items"]),r(D,{data:t(s).page},null,8,["data"])])):u("",!0)],64))}};export{pt as default};
