import{o as n,g as o,t as y,b as i,u as t,w as r,F as u,a as l,D as _,n as m,i as h,f,h as p,d as T,e as U}from"./app-DjYJfrF8.js";import{i as g,c as x}from"./app-C1XH7PtB.js";import{a as N,_ as L}from"./app-iFOqw02O.js";import{_ as z}from"./app-tVxlBux4.js";import{T as S}from"./app-DA-qpgNO.js";import{_ as D}from"./app-D_zujAYk.js";import{_ as I,a as C}from"./app-BpjMg_gY.js";import{_ as V}from"./app-mO6x4u2P.js";import{T as b,a as $}from"./app-DHrHuxh9.js";import{_ as M}from"./app-DsXmtRco.js";import{T as w}from"./app-DmSrxmWd.js";import{D as Y}from"./app-DeStKpGO.js";import"./app-D3zb-bsA.js";import"./app-BUF1jp6-.js";import"./app-C957O1lC.js";import"./app-DPFGrewt.js";import"./app-DPmFMerm.js";import"./app-BDyHR7S0.js";import"./app-DQcJZ4rR.js";import"./app-3rCQf5Hi.js";import"./app-C8URsP3D.js";import"./app-__35K3dS.js";import"./app-l8Q5NmGb.js";import"./app-CMrnp7LG.js";import"./app-CQoUplHC.js";import"./app-DYZ72m3h.js";import"./app-zaKueCu1.js";import"./app-kBNY2ZLt.js";import"./app-BZfG51gO.js";function F(){const{utils:v,Tea:e}=g(this);this.success=this.$NotifySuccess("购买成功","."),this.$delay(function(){if(this.planId>0){let c=this,a=this.plans.$find(function(s,d){return d.id==c.planId});a!=null&&this.selectPlan(a,!0)}}),this.selectedPlan=null,this.period="monthly",this.fee=0,this.planDescription="",this.selectPlan=function(c,a){this.planId=c.id,this.selectedPlan=c,this.period="monthly",this.fee=c.monthlyPrice,a&&setTimeout(function(){window.scrollTo(0,1e6)})},this.countMonths=1,this.countSeasons=1,this.countYears=1,this.$delay(function(){this.$watch("period",function(c){switch(this.countMonths=1,this.countSeasons=1,this.countYears=1,c){case"monthly":this.fee=this.countMonths*this.selectedPlan.monthlyPrice;break;case"seasonally":this.fee=this.countSeasons*this.selectedPlan.seasonallyPrice;break;case"yearly":this.fee=this.countYears*this.selectedPlan.yearlyPrice;break}}),this.$watch("countMonths",function(c){let a=parseInt(c);(isNaN(a)||a<1)&&(a=1),this.fee=this.selectedPlan.monthlyPrice*a}),this.$watch("countSeasons",function(c){let a=parseInt(c);(isNaN(a)||a<1)&&(a=1),this.fee=this.selectedPlan.seasonallyPrice*a}),this.$watch("countYears",function(c){let a=parseInt(c);(isNaN(a)||a<1)&&(a=1),this.fee=this.selectedPlan.yearlyPrice*a})}),this.composeCapacity=function(c){return v.convertSizeCapacityToString(c)}}const W={key:0},O={key:1,class:"disabled"},P={__name:"PlanQuotaValue",props:["modelValue"],setup(v){return(e,c)=>(n(),o("span",null,[v.modelValue>0?(n(),o("span",W,y(v.modelValue),1)):(n(),o("span",O,"无限制"))]))}},R=["value"],q={class:"ui table selectable celled structured plans-table"},B=l("th",null,null,-1),A=l("th",{class:"two wide"},[l("span",{class:"small"},"用量/功能")],-1),G=["onClick"],E={class:"plan-name"},Q={class:"small grey"},j=l("td",null,null,-1),H=l("td",null,null,-1),J=l("td",{rowspan:"2",class:"value-category-name"},"流量配额",-1),K=l("td",{class:"value-name"},"日流量限制",-1),X=["onClick"],Z={key:0},ee={key:1},te=l("td",{class:"value-name"},"月流量限制",-1),le=["onClick"],se={key:0},ne={key:1},oe=l("td",{class:"value-category-name"},"带宽限制",-1),ae=l("td",{class:"value-name"},"单节点带宽限制",-1),de=["onClick"],ie={key:0},ce={key:1},ue=l("td",{rowspan:"8",class:"value-category-name"},"用量配额",-1),re=l("td",{class:"value-name"},"总网站数限制",-1),_e=["onClick"],me=l("td",{class:"value-name"},"总域名数限制",-1),he=["onClick"],pe=l("td",{class:"value-name"},"每个网站最多域名数",-1),ye=["onClick"],fe=l("td",{class:"value-name"},"单日请求数限制",-1),Pe=["onClick"],ve=l("td",{class:"value-name"},"单月请求数限制",-1),ke=["onClick"],Ve=l("td",{class:"value-name"},"单日Websocket连接数限制",-1),Ce=["onClick"],be=l("td",{class:"value-name"},"单月Websocket连接数限制",-1),$e=["onClick"],Se=l("td",{class:"value-name"},"文件上传限制",-1),we=["onClick"],Te={key:0},Ue={key:1},ge=["colspan"],xe={key:0},Ne={key:1},Le=["rowspan"],ze={class:"value-name"},De=["onClick"],Ie={key:0},Me=l("i",{class:"icon check green"},null,-1),Ye=[Me],Fe={key:1},We=l("td",null,null,-1),Oe=l("td",null,null,-1),Re={key:0},qe=l("td",null,"已选择套餐",-1),Be=l("td",{class:"title"},"账户余额",-1),Ae={key:0},Ge={key:1},Ee=l("a",{href:"/finance/charge"},[l("span",{class:"small"},"[充值]")],-1),Qe={key:1},je=l("td",null,"计费方式",-1),He={key:0},Je={key:1},Ke={key:2},Xe={key:0},Ze=l("td",null,"周期 *",-1),et={key:0},tt=l("td",null,"月数 *",-1),lt=l("span",null,"月",-1),st={key:1},nt=l("td",null,"季度数 *",-1),ot=l("span",null,"季度",-1),at={key:2},dt=l("td",null,"年数 *",-1),it=l("span",null,"年",-1),ct=l("td",null,"预计费用",-1),ut={key:0},rt={key:1},_t={key:1},mt=l("td",null,"结束日期",-1),ht=l("tr",null,[l("td",null,"预计费用"),l("td",null,"月结")],-1),pt={key:2},yt=l("td",null,"结束日期",-1),ft=l("tr",null,[l("td",null,"预计费用"),l("td",null,"月结")],-1),Pt=l("td",null,"备注名称",-1),vt=l("p",{class:"comment"},"用于识别不同的套餐，默认为套餐名称。",-1),Jt={__name:"buy",setup(v){const e=x(new F);return(c,a)=>(n(),o(u,null,[i(N,{ctx:t(e),"active-tab":"buy"},null,8,["ctx"]),i(z,{action:"$",onSuccess:t(e).success},{default:r(()=>[l("input",{type:"hidden",name:"planId",value:t(e).planId},null,8,R),l("table",q,[l("thead",null,[l("tr",null,[B,A,(n(!0),o(u,null,_(t(e).plans,s=>(n(),o("th",{class:m({selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}),onClick:h(d=>t(e).selectPlan(s),["prevent"])},[l("div",E,y(s.name),1),l("div",null,[l("span",Q,y(s.description),1),f(" ")])],10,G))),256))])]),l("tbody",null,[l("tr",null,[j,H,(n(!0),o(u,null,_(t(e).plans,s=>(n(),o("td",{class:m(["",{selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}])},[i(S,{secondary:t(e).selectedPlan==null||s.id!=t(e).selectedPlan.id,type:"button",onClick:h(d=>t(e).selectPlan(s,!0),["prevent"])},{default:r(()=>[f("选择")]),_:2},1032,["secondary","onClick"])],2))),256))]),l("tr",null,[J,K,(n(!0),o(u,null,_(t(e).plans,s=>(n(),o("td",{class:m({selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}),onClick:h(d=>t(e).selectPlan(s),["prevent"])},[s.trafficLimit!=null&&s.trafficLimit.isOn&&s.trafficLimit.dailySize!=null&&s.trafficLimit.dailySize.count>0?(n(),o("div",Z,y(t(e).composeCapacity(s.trafficLimit.dailySize)),1)):(n(),o("div",ee,"无限制"))],10,X))),256))]),l("tr",null,[te,(n(!0),o(u,null,_(t(e).plans,s=>(n(),o("td",{class:m({selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}),onClick:h(d=>t(e).selectPlan(s),["prevent"])},[s.trafficLimit!=null&&s.trafficLimit.isOn&&s.trafficLimit.monthlySize!=null&&s.trafficLimit.monthlySize.count>0?(n(),o("div",se,y(t(e).composeCapacity(s.trafficLimit.monthlySize)),1)):(n(),o("div",ne,"无限制"))],10,le))),256))]),l("tr",null,[oe,ae,(n(!0),o(u,null,_(t(e).plans,s=>(n(),o("td",{class:m({selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}),onClick:h(d=>t(e).selectPlan(s),["prevent"])},[s.bandwidthLimitPerNode!=null&&s.bandwidthLimitPerNode.count>0?(n(),o("div",ie,[i(L,{"v-value":s.bandwidthLimitPerNode},null,8,["v-value"])])):(n(),o("div",ce,"无限制"))],10,de))),256))]),l("tr",null,[ue,re,(n(!0),o(u,null,_(t(e).plans,s=>(n(),o("td",{class:m({selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}),onClick:h(d=>t(e).selectPlan(s),["prevent"])},[i(P,{modelValue:s.totalServers,"onUpdate:modelValue":d=>s.totalServers=d},null,8,["modelValue","onUpdate:modelValue"])],10,_e))),256))]),l("tr",null,[me,(n(!0),o(u,null,_(t(e).plans,s=>(n(),o("td",{class:m({selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}),onClick:h(d=>t(e).selectPlan(s),["prevent"])},[i(P,{modelValue:s.totalServerNames,"onUpdate:modelValue":d=>s.totalServerNames=d},null,8,["modelValue","onUpdate:modelValue"])],10,he))),256))]),l("tr",null,[pe,(n(!0),o(u,null,_(t(e).plans,s=>(n(),o("td",{class:m({selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}),onClick:h(d=>t(e).selectPlan(s),["prevent"])},[i(P,{modelValue:s.totalServerNamesPerServer,"onUpdate:modelValue":d=>s.totalServerNamesPerServer=d},null,8,["modelValue","onUpdate:modelValue"])],10,ye))),256))]),l("tr",null,[fe,(n(!0),o(u,null,_(t(e).plans,s=>(n(),o("td",{class:m({selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}),onClick:h(d=>t(e).selectPlan(s),["prevent"])},[i(P,{modelValue:s.dailyRequests,"onUpdate:modelValue":d=>s.dailyRequests=d},null,8,["modelValue","onUpdate:modelValue"])],10,Pe))),256))]),l("tr",null,[ve,(n(!0),o(u,null,_(t(e).plans,s=>(n(),o("td",{class:m({selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}),onClick:h(d=>t(e).selectPlan(s),["prevent"])},[i(P,{modelValue:s.monthlyRequests,"onUpdate:modelValue":d=>s.monthlyRequests=d},null,8,["modelValue","onUpdate:modelValue"])],10,ke))),256))]),l("tr",null,[Ve,(n(!0),o(u,null,_(t(e).plans,s=>(n(),o("td",{class:m({selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}),onClick:h(d=>t(e).selectPlan(s),["prevent"])},[i(P,{modelValue:s.dailyWebsocketConnections,"onUpdate:modelValue":d=>s.dailyWebsocketConnections=d},null,8,["modelValue","onUpdate:modelValue"])],10,Ce))),256))]),l("tr",null,[be,(n(!0),o(u,null,_(t(e).plans,s=>(n(),o("td",{class:m({selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}),onClick:h(d=>t(e).selectPlan(s),["prevent"])},[i(P,{modelValue:s.monthlyWebsocketConnections,"onUpdate:modelValue":d=>s.monthlyWebsocketConnections=d},null,8,["modelValue","onUpdate:modelValue"])],10,$e))),256))]),l("tr",null,[Se,(n(!0),o(u,null,_(t(e).plans,s=>(n(),o("td",{class:m({selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}),onClick:h(d=>t(e).selectPlan(s),["prevent"])},[s.maxUploadSize!=null&&s.maxUploadSize.count>0?(n(),o("span",Te,y(t(e).composeCapacity(s.maxUploadSize)),1)):(n(),o("span",Ue,"无限制"))],10,we))),256))])]),l("tbody",null,[l("tr",null,[l("td",{colspan:t(e).plans.length+2},[i(D,null,{default:r(()=>[t(e).moreOptionsVisible?p("",!0):(n(),o("span",xe,"查看网站功能支持")),t(e).moreOptionsVisible?(n(),o("span",Ne,"收起网站功能支持")):p("",!0)]),_:1})],8,ge)])]),T(l("tbody",null,[(n(!0),o(u,null,_(t(e).allFeatures,(s,d)=>(n(),o("tr",null,[d==0?(n(),o("td",{key:0,rowspan:t(e).allFeatures.length,class:"value-category-name"},"网站功能",8,Le)):p("",!0),l("td",ze,y(s.name),1),(n(!0),o(u,null,_(t(e).plans,k=>(n(),o("td",{class:m({selected:t(e).selectedPlan!=null&&k.id==t(e).selectedPlan.id}),onClick:h(kt=>t(e).selectPlan(k),["prevent"])},[k.hasFullFeatures||k.featureCodes!=null&&k.featureCodes.$contains(s.code)?(n(),o("span",Ie,Ye)):(n(),o("span",Fe,"/"))],10,De))),256))]))),256))],512),[[U,t(e).moreOptionsVisible]]),l("tbody",null,[l("tr",null,[We,Oe,(n(!0),o(u,null,_(t(e).plans,s=>(n(),o("td",{class:m(["bottom",{selected:t(e).selectedPlan!=null&&s.id==t(e).selectedPlan.id}])},[i(S,{secondary:t(e).selectedPlan==null||s.id!=t(e).selectedPlan.id,type:"button",onClick:h(d=>t(e).selectPlan(s),["prevent"])},{default:r(()=>[f("选择")]),_:2},1032,["secondary","onClick"])],2))),256))])])]),i(Y,null,{default:r(()=>[l("tbody",null,[t(e).selectedPlan!=null?(n(),o("tr",Re,[qe,l("td",null,[l("strong",null,y(t(e).selectedPlan.name),1)])])):p("",!0),l("tr",null,[Be,l("td",null,[t(e).userAccount!=null?(n(),o("span",Ae,y(t(e).userAccount.total)+"元",1)):(n(),o("span",Ge,"0元")),f("   "),Ee])]),t(e).selectedPlan!=null?(n(),o("tr",Qe,[je,l("td",null,[t(e).selectedPlan.priceType=="period"?(n(),o("span",He,"按时间周期付费，"+y(t(e).selectedPlan.monthlyPrice)+"元/月，"+y(t(e).selectedPlan.seasonallyPrice)+"元/季度，"+y(t(e).selectedPlan.yearlyPrice)+"元/年。",1)):p("",!0),t(e).selectedPlan.priceType=="traffic"?(n(),o("span",Je,"按流量付费。")):p("",!0),t(e).selectedPlan.priceType=="bandwidth"?(n(),o("span",Ke,"按带宽付费。")):p("",!0)])])):p("",!0)]),t(e).selectedPlan!=null&&t(e).selectedPlan.priceType=="period"?(n(),o("tbody",Xe,[l("tr",null,[Ze,l("td",null,[i(I,{name:"period",modelValue:t(e).period,"onUpdate:modelValue":a[0]||(a[0]=s=>t(e).period=s)},{default:r(()=>[i(C,{value:"monthly"},{default:r(()=>[f("按月")]),_:1}),i(C,{value:"seasonally"},{default:r(()=>[f("按季度")]),_:1}),i(C,{value:"yearly"},{default:r(()=>[f("按年")]),_:1})]),_:1},8,["modelValue"])])]),t(e).period=="monthly"?(n(),o("tr",et,[tt,l("td",null,[i(b,null,{default:r(()=>[i(V,{name:"countMonths",value:"1",style:{width:"5em"},maxlength:"4",modelValue:t(e).countMonths,"onUpdate:modelValue":a[1]||(a[1]=s=>t(e).countMonths=s)},null,8,["modelValue"]),i($,null,{default:r(()=>[lt]),_:1})]),_:1})])])):p("",!0),t(e).period=="seasonally"?(n(),o("tr",st,[nt,l("td",null,[i(b,null,{default:r(()=>[i(V,{name:"countSeasons",value:"1",style:{width:"5em"},maxlength:"4",modelValue:t(e).countSeasons,"onUpdate:modelValue":a[2]||(a[2]=s=>t(e).countSeasons=s)},null,8,["modelValue"]),i($,null,{default:r(()=>[ot]),_:1})]),_:1})])])):p("",!0),t(e).period=="yearly"?(n(),o("tr",at,[dt,l("td",null,[i(b,null,{default:r(()=>[i(V,{name:"countYears",value:"1",style:{width:"5em"},maxlength:"4",modelValue:t(e).countYears,"onUpdate:modelValue":a[3]||(a[3]=s=>t(e).countYears=s)},null,8,["modelValue"]),i($,null,{default:r(()=>[it]),_:1})]),_:1})])])):p("",!0),l("tr",null,[ct,l("td",null,[t(e).fee>0?(n(),o("span",ut,y(t(e).fee)+"元",1)):(n(),o("span",rt,"-"))])])])):p("",!0),t(e).selectedPlan!=null&&t(e).selectedPlan.priceType=="traffic"?(n(),o("tbody",_t,[l("tr",null,[mt,l("td",null,[i(w,{name:"dayTo",modelValue:t(e).defaultDayTo,"onUpdate:modelValue":a[4]||(a[4]=s=>t(e).defaultDayTo=s)},null,8,["modelValue"])])]),ht])):p("",!0),t(e).selectedPlan!=null&&t(e).selectedPlan.priceType=="bandwidth"?(n(),o("tbody",pt,[l("tr",null,[yt,l("td",null,[i(w,{name:"dayTo",modelValue:t(e).defaultDayTo,"onUpdate:modelValue":a[5]||(a[5]=s=>t(e).defaultDayTo=s)},null,8,["modelValue"])])]),ft])):p("",!0),l("tbody",null,[l("tr",null,[Pt,l("td",null,[i(V,{name:"name",maxlength:"50",class:"w-full"}),vt])])])]),_:1}),i(M,null,{default:r(()=>[f("确定购买")]),_:1})]),_:1},8,["onSuccess"])],64))}};export{Jt as default};
