import{i as K,u as D,c as F}from"./app-C1XH7PtB.js";import{_ as E}from"./app-DFhkgmCn.js";import{_ as G}from"./app-Chi4HHKa.js";import{_ as z}from"./app-tVxlBux4.js";import{_ as J}from"./app-DsXmtRco.js";import{r as p,o as u,g as m,a as t,u as e,b as o,w as i,c as k,h as f,d as b,e as U,F as M,D as j,t as q,i as V,bb as H,f as r}from"./app-DjYJfrF8.js";import{_ as Q,a as A}from"./app-BpjMg_gY.js";import{T as W}from"./app-DA-qpgNO.js";import{C as $}from"./app-DixtgCCB.js";import{_ as X}from"./app-aeZMn3W6.js";import{_ as Y}from"./app-BWoLk5mp.js";import{_ as Z}from"./app-D_zujAYk.js";import{_ as O}from"./app-687xuRn_.js";import{_ as tt}from"./app-DNZHd3zm.js";import{P as et}from"./app-By0fUdjH.js";import{T as ot}from"./app-DDxM4xJi.js";import{D as I}from"./app-DeStKpGO.js";import{L as st}from"./app-BOEypwYT.js";import{_ as L}from"./app-BMxA-yCD.js";import"./app-C7oeXCqa.js";import"./app-BsrZGiqM.js";import"./app-zaKueCu1.js";import"./app-DPmFMerm.js";import"./app-DPFGrewt.js";import"./app-Brmd7FEP.js";import"./app-RjwKLjbv.js";import"./app-B3JHJgWn.js";import"./app-__35K3dS.js";import"./app-C6feLE3_.js";import"./app-CMrnp7LG.js";import"./app-CMoUOWYK.js";import"./app-3rCQf5Hi.js";import"./app-C8URsP3D.js";import"./app-l8Q5NmGb.js";import"./app-CQoUplHC.js";import"./app-DYZ72m3h.js";import"./app-DqyEP-Ic.js";import"./app-mO6x4u2P.js";import"./app-Da0UoovQ.js";import"./app-BZpo3xeX.js";import"./app-CXb0aRmx.js";import"./app-PXD802g2.js";import"./app-Bx1vQSc6.js";import"./app-g_ZjR39Z.js";import"./app-BOdfUA0H.js";function nt(){K(this),this.success=this.$NotifyReloadSuccess("保存成功")}const lt=["value"],it=t("td",{class:"title"},"启用UA名单",-1),at=t("p",{class:"comment"},"选中后表示开启UserAgent名单。",-1),rt=t("td",null,"UA名单",-1),ut={key:0},dt={class:"label-group"},mt={key:0},ct={key:1,class:"disabled"},ft={key:0,class:"green"},_t={key:1,class:"red"},pt=["onClick"],vt={key:1,style:{"margin-top":"0.5em"}},ht=t("td",{class:"title"},"UA关键词",-1),yt={class:"comment"},gt=t("td",null,"动作",-1),bt=t("i",{class:"icon remove small"},null,-1),Ut=[bt],Vt={style:{"margin-top":"0.5em"}},$t={colspan:"2"},wt=t("td",null,"例外URL",-1),Lt=t("p",{class:"comment"},"如果填写了例外URL，表示这些URL跳过不做处理。",-1),kt=t("td",null,"限制URL",-1),Ct=t("p",{class:"comment"},"如果填写了限制URL，表示只对这些URL进行处理；如果不填则表示支持所有的URL。",-1),Rt={__name:"UserAgentConfigBox",props:["v-is-location","v-is-group","modelValue"],setup(C){const c=D(),y=C,v=p(),{config:n,isAdding:g,addingFilter:_,moreOptionsVisible:w,batchKeywords:h}=function(){let l=y.modelValue;return l==null&&(l={isPrior:!1,isOn:!1,filters:[]}),l.filters==null&&(l.filters=[]),{config:p(l),isAdding:p(!1),addingFilter:p({keywords:[],action:"deny"}),moreOptionsVisible:p(!1),batchKeywords:p("")}}(),R=function(){return(!y.vIsLocation&&!y.vIsGroup||n.value.isPrior)&&n.value.isOn},P=function(l){c.confirm("确定要删除此名单吗？",function(){n.value.filters.$remove(l)})},T=function(){g.value=!0,setTimeout(function(){v.value.focus()})},B=function(){if(_.value.action=="deny")n.value.filters.push(_.value);else{let l=-1;n.value.filters.forEach(function(a,s){a.action=="allow"&&(l=s)}),l<0?n.value.filters.unshift(_.value):n.value.filters.$insert(l+1,_.value)}x()},x=function(){g.value=!1,_.value={keywords:[],action:"deny"},h.value=""},N=function(l){let a=l.split(/\n/),s=[];a.forEach(function(d){d=d.trim(),s.$contains(d)||s.push(d)}),_.value.keywords=s},S=function(){w.value=!w.value};return(l,a)=>(u(),m("div",null,[t("input",{type:"hidden",name:"userAgentJSON",value:JSON.stringify(e(n))},null,8,lt),o(I,null,{default:i(()=>[l.vIsLocation||l.vIsGroup?(u(),k(X,{key:0,"v-config":e(n)},null,8,["v-config"])):f("",!0),b(t("tbody",null,[t("tr",null,[it,t("td",null,[o(Y,{value:"1",modelValue:e(n).isOn,"onUpdate:modelValue":a[0]||(a[0]=s=>e(n).isOn=s)},null,8,["modelValue"]),at])])],512),[[U,!l.vIsLocation&&!l.vIsGroup||e(n).isPrior]]),b(t("tbody",null,[t("tr",null,[rt,t("td",null,[e(n).filters.length>0?(u(),m("div",ut,[o(st,{items:e(n).filters},{default:i(()=>[o(L,{header:"UA关键词",class:"name-column"},{body:i(({data:s})=>[t("div",dt,[(u(!0),m(M,null,j(s.keywords,d=>(u(),k(ot,{outlined:""},{default:i(()=>[d.length>0?(u(),m("span",mt,q(d),1)):f("",!0),d.length==0?(u(),m("span",ct,"[空]")):f("",!0)]),_:2},1024))),256))])]),_:1}),o(L,{header:"动作",style:{width:"6em","min-width":"6em"}},{body:i(({data:s})=>[s.action=="allow"?(u(),m("span",ft,"允许")):f("",!0),s.action=="deny"?(u(),m("span",_t,"不允许")):f("",!0)]),_:1}),o(L,{header:"操作",class:"one op"},{body:i(({data:s,index:d})=>[t("a",{href:"",onClick:V(It=>P(d),["prevent"])},"删除",8,pt)]),_:1})]),_:1},8,["items"])])):f("",!0),e(g)?(u(),m("div",vt,[o(I,null,{default:i(()=>[t("tbody",null,[t("tr",null,[ht,t("td",null,[o(tt,{modelValue:e(h),"onUpdate:modelValue":a[1]||(a[1]=s=>H(h)?h.value=s:null),onInput:a[2]||(a[2]=s=>N(e(h))),ref_key:"batchKeywordsRef",ref:v,class:"w-full",placeholder:"*浏览器标识*",rows:"5"},null,8,["modelValue"]),t("p",yt,[r("每行一个关键词；不区分大小写，比如 "),o($,null,{default:i(()=>[r("Chrome")]),_:1}),r(" ；支持 "),o($,null,{default:i(()=>[r("*")]),_:1}),r(" 通配符，比如 "),o($,null,{default:i(()=>[r("*Firefox*")]),_:1}),r(" ；单个"),o($,null,{default:i(()=>[r("*")]),_:1}),r("通配符表示所有UserAgent；也支持空行关键词，表示空UserAgent。 ")])])]),t("tr",null,[gt,t("td",null,[o(Q,{modelValue:e(_).action,"onUpdate:modelValue":a[3]||(a[3]=s=>e(_).action=s)},{default:i(()=>[o(A,{value:"deny"},{default:i(()=>[r("不允许")]),_:1}),o(A,{value:"allow"},{default:i(()=>[r("允许")]),_:1})]),_:1},8,["modelValue"])])])])]),_:1}),o(W,{type:"button",secondary:"",size:"small",onClick:V(B,["prevent"])},{default:i(()=>[r("保存")]),_:1}),r("   "),t("a",{href:"",onClick:V(x,["prevent"]),title:"取消"},Ut)])):f("",!0),b(t("div",Vt,[o(et,{size:"small",onClick:V(T,["prevent"])})],512),[[U,!e(g)]])])]),t("tr",null,[t("td",$t,[o(Z,{onChange:S})])])],512),[[U,R()]]),b(t("tbody",null,[t("tr",null,[wt,t("td",null,[o(O,{modelValue:e(n).exceptURLPatterns,"onUpdate:modelValue":a[4]||(a[4]=s=>e(n).exceptURLPatterns=s)},null,8,["modelValue"]),Lt])]),t("tr",null,[kt,t("td",null,[o(O,{modelValue:e(n).onlyURLPatterns,"onUpdate:modelValue":a[5]||(a[5]=s=>e(n).onlyURLPatterns=s)},null,8,["modelValue"]),Ct])])],512),[[U,e(w)&&R()]])]),_:1})]))}},xt={key:0},At=["value"],Ot={key:1},we={__name:"index",setup(C){const c=F(new nt);return(y,v)=>(u(),k(E,{ctx:e(c)},{default:i(()=>[e(c).featureIsOn?(u(),m("div",xt,[o(z,{action:"$",onSuccess:e(c).success},{default:i(()=>[t("input",{type:"hidden",name:"webId",value:e(c).webId},null,8,At),o(Rt,{modelValue:e(c).userAgentConfig,"onUpdate:modelValue":v[0]||(v[0]=n=>e(c).userAgentConfig=n)},null,8,["modelValue"]),o(J,{class:"mt-4"})]),_:1},8,["onSuccess"])])):f("",!0),e(c).featureIsOn?f("",!0):(u(),m("div",Ot,[o(G)]))]),_:1},8,["ctx"]))}};export{we as default};
