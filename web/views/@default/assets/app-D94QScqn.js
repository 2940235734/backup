import{o as g,c as S,w as o,b as n,a as e,u as l,f as i,t as D,d as p,e as r,i as d,n as T,L as x}from"./app-DjYJfrF8.js";import{P}from"./app-4o4XE0Ov.js";import{i as v,c as w}from"./app-C1XH7PtB.js";import{_ as N}from"./app-tVxlBux4.js";import{_ as m}from"./app-mO6x4u2P.js";import{_ as b}from"./app-0G6rzlq8.js";import{C as f}from"./app-DixtgCCB.js";import{_}from"./app-Cq1AgKTS.js";import{_ as A,a as c}from"./app-BpjMg_gY.js";import{_ as $}from"./app-D_zujAYk.js";import{_ as R}from"./app-DxMBD05v.js";import{_ as U}from"./app-Ci8gwQok.js";import{_ as B}from"./app-BWoLk5mp.js";import{_ as C}from"./app-DsXmtRco.js";import{T as y,a as h}from"./app-DHrHuxh9.js";import{D as q}from"./app-DeStKpGO.js";import"./app-CXXoRFML.js";import"./app-DYZ72m3h.js";import"./app-DA-qpgNO.js";import"./app-DDxM4xJi.js";import"./app-CMoUOWYK.js";import"./app-Bx1vQSc6.js";import"./app-3rCQf5Hi.js";import"./app-C8URsP3D.js";import"./app-__35K3dS.js";import"./app-l8Q5NmGb.js";import"./app-CMrnp7LG.js";import"./app-CQoUplHC.js";import"./app-zaKueCu1.js";import"./app-By0fUdjH.js";import"./app-DNZHd3zm.js";import"./app-DqyEP-Ic.js";function O(){v(this),this.success=this.$NotifyPopup,this.type=this.policy.type,this.authDescription="",this.rawDescription="",this.$delay(function(){this.changeType()}),this.changeType=function(){let u=this,t=this.authTypes.$find(function(V,a){return a.code==u.type});t!=null?(this.policy.typeName=t.name,this.authDescription=t.description,this.rawDescription=t.description):(this.authDescription="",this.rawDescription="")},this.typeASecret="",this.typeASignParamName="sign",this.policy.type=="typeA"&&(this.typeASecret=this.policy.params.secret,this.typeASignParamName=this.policy.params.signParamName,this.$delay(function(){this.changeTypeASignParamName()})),this.generateTypeASecret=function(){this.$post(".random").success(function(u){this.typeASecret=u.data.random})},this.changeTypeASignParamName=function(){this.authDescription=this.rawDescription.replace("sign=",this.typeASignParamName+"=")},this.typeBSecret="",this.policy.type=="typeB"&&(this.typeBSecret=this.policy.params.secret),this.generateTypeBSecret=function(){this.$post(".random").success(function(u){this.typeBSecret=u.data.random})},this.typeCSecret="",this.policy.type=="typeC"&&(this.typeCSecret=this.policy.params.secret),this.generateTypeCSecret=function(){this.$post(".random").success(function(u){this.typeCSecret=u.data.random})},this.typeDSecret="",this.typeDSignParamName="sign",this.typeDTimestampParamName="t",this.policy.type=="typeD"&&(this.typeDSecret=this.policy.params.secret,this.typeDSignParamName=this.policy.params.signParamName,this.typeDTimestampParamName=this.policy.params.timestampParamName,this.$delay(function(){this.changeTypeDSignParamName(),this.changeTypeDTimestampParamName()})),this.generateTypeDSecret=function(){this.$post(".random").success(function(u){this.typeDSecret=u.data.random})},this.changeTypeDSignParamName=function(){this.authDescription=this.rawDescription.replace("sign=",this.typeDSignParamName+"="),this.authDescription=this.authDescription.replace("t=",this.typeDTimestampParamName+"=")},this.changeTypeDTimestampParamName=function(){this.authDescription=this.rawDescription.replace("sign=",this.typeDSignParamName+"="),this.authDescription=this.authDescription.replace("t=",this.typeDTimestampParamName+"=")},this.moreBasicAuthOptionsVisible=!1,this.showMoreBasicAuthOptions=function(){this.moreBasicAuthOptionsVisible=!this.moreBasicAuthOptionsVisible},this.subRequestFollowRequest=this.policy.params.method!=null&&this.policy.params.method.length>0?0:1}const L=e("header",null,"修改鉴权方式",-1),I=["value"],k=e("td",{class:"title"},"名称 *",-1),F=e("td",null,"鉴权类型 *",-1),M=["innerHTML"],E=e("td",null,"鉴权密钥 *",-1),G={class:"comment"},H=e("td",null,"签名参数 *",-1),z=e("td",null,"有效时间",-1),j=e("span",null,"秒",-1),J=e("p",{class:"comment"},"链接有效时间。",-1),K=e("td",null,"鉴权密钥 *",-1),Q={class:"comment"},W=e("td",null,"有效时间",-1),X=e("span",null,"秒",-1),Y=e("p",{class:"comment"},"链接有效时间。",-1),Z=e("td",null,"鉴权密钥 *",-1),ee={class:"comment"},te=e("td",null,"有效时间",-1),le=e("span",null,"秒",-1),ae=e("p",{class:"comment"},"链接有效时间。",-1),se=e("td",null,"鉴权密钥 *",-1),ne={class:"comment"},oe=e("td",null,"签名参数 *",-1),ie=e("td",null,"时间戳参数 *",-1),me=e("td",null,"有效时间",-1),ue=e("span",null,"秒",-1),pe=e("p",{class:"comment"},"链接有效时间。",-1),re=e("td",null,"用户 *",-1),de={colspan:"2"},ce=e("td",null,[i("认证领域名"),e("em",null,"（Realm）")],-1),ye=e("td",null,"字符集",-1),he={class:"comment"},fe=e("td",null,"子请求URL *",-1),_e=e("p",{class:"comment"},"可以是一个完整的URL，也可以是一个路径。",-1),Ve=e("td",null,"请求方法",-1),ge={style:{"margin-top":"0.8em"}},Se={colspan:"2"},De=e("td",null,"限定文件扩展名",-1),Te={class:"comment"},xe=e("td",null,"限定域名",-1),Pe=e("p",{class:"comment"},"如果不为空，则表示只有这些域名的文件才需要鉴权。",-1),ve=e("td",null,"启用当前鉴权",-1),st={__name:"updatePopup",setup(u){const t=w(new O);return(V,a)=>(g(),S(P,null,{default:o(()=>[L,n(N,{action:"$",onSuccess:l(t).success},{default:o(()=>[e("input",{type:"hidden",name:"policyId",value:l(t).policy.id},null,8,I),n(q,null,{default:o(()=>[e("tbody",null,[e("tr",null,[k,e("td",null,[n(m,{type:"text",name:"name",maxlength:"50",autofocus:"",modelValue:l(t).policy.name,"onUpdate:modelValue":a[0]||(a[0]=s=>l(t).policy.name=s),class:"w-full"},null,8,["modelValue"])])]),e("tr",null,[F,e("td",null,[i(D(l(t).policy.typeName)+" ",1),e("p",{class:"comment",innerHTML:l(t).authDescription},null,8,M)])])]),p(e("tbody",null,[e("tr",null,[E,e("td",null,[n(m,{type:"text",maxlength:"40",name:"typeASecret",modelValue:l(t).typeASecret,"onUpdate:modelValue":a[1]||(a[1]=s=>l(t).typeASecret=s),autocomplete:"off",class:"w-full"},null,8,["modelValue"]),e("p",G,[i("只能包含字母、数字，长度不超过40。"),e("a",{href:"",onClick:a[2]||(a[2]=d(s=>l(t).generateTypeASecret(),["prevent"]))},"[随机生成]")])])]),e("tr",null,[H,e("td",null,[n(m,{type:"text",maxlength:"30",name:"typeASignParamName",value:"sign",modelValue:l(t).typeASignParamName,"onUpdate:modelValue":a[3]||(a[3]=s=>l(t).typeASignParamName=s),onInput:l(t).changeTypeASignParamName,class:"w-full"},null,8,["modelValue","onInput"])])]),e("tr",null,[z,e("td",null,[n(y,null,{default:o(()=>[n(m,{type:"text",maxlength:"8",name:"typeALife",value:"30",style:{width:"7em"},modelValue:l(t).policy.params.life,"onUpdate:modelValue":a[4]||(a[4]=s=>l(t).policy.params.life=s)},null,8,["modelValue"]),n(h,null,{default:o(()=>[j]),_:1})]),_:1}),J])])],512),[[r,l(t).type=="typeA"]]),p(e("tbody",null,[e("tr",null,[K,e("td",null,[n(m,{type:"text",maxlength:"40",name:"typeBSecret",modelValue:l(t).typeBSecret,"onUpdate:modelValue":a[5]||(a[5]=s=>l(t).typeBSecret=s),autocomplete:"off",class:"w-full"},null,8,["modelValue"]),e("p",Q,[i("只能包含字母、数字，长度不超过40。"),e("a",{href:"",onClick:a[6]||(a[6]=d(s=>l(t).generateTypeBSecret(),["prevent"]))},"[随机生成]")])])]),e("tr",null,[W,e("td",null,[n(y,null,{default:o(()=>[n(m,{type:"text",maxlength:"8",name:"typeBLife",value:"30",style:{width:"7em"},modelValue:l(t).policy.params.life,"onUpdate:modelValue":a[7]||(a[7]=s=>l(t).policy.params.life=s)},null,8,["modelValue"]),n(h,null,{default:o(()=>[X]),_:1})]),_:1}),Y])])],512),[[r,l(t).type=="typeB"]]),p(e("tbody",null,[e("tr",null,[Z,e("td",null,[n(m,{type:"text",maxlength:"40",name:"typeCSecret",modelValue:l(t).typeCSecret,"onUpdate:modelValue":a[8]||(a[8]=s=>l(t).typeCSecret=s),autocomplete:"off",class:"w-full"},null,8,["modelValue"]),e("p",ee,[i("只能包含字母、数字，长度不超过40。"),e("a",{href:"",onClick:a[9]||(a[9]=d(s=>l(t).generateTypeCSecret(),["prevent"]))},"[随机生成]")])])]),e("tr",null,[te,e("td",null,[n(y,null,{default:o(()=>[n(m,{type:"text",maxlength:"8",name:"typeCLife",value:"30",style:{width:"7em"},modelValue:l(t).policy.params.life,"onUpdate:modelValue":a[10]||(a[10]=s=>l(t).policy.params.life=s)},null,8,["modelValue"]),n(h,null,{default:o(()=>[le]),_:1})]),_:1}),ae])])],512),[[r,l(t).type=="typeC"]]),p(e("tbody",null,[e("tr",null,[se,e("td",null,[n(m,{type:"text",maxlength:"40",name:"typeDSecret",modelValue:l(t).typeDSecret,"onUpdate:modelValue":a[11]||(a[11]=s=>l(t).typeDSecret=s),autocomplete:"off",class:"w-full"},null,8,["modelValue"]),e("p",ne,[i("只能包含字母、数字，长度不超过40。"),e("a",{href:"",onClick:a[12]||(a[12]=d(s=>l(t).generateTypeDSecret(),["prevent"]))},"[随机生成]")])])]),e("tr",null,[oe,e("td",null,[n(m,{type:"text",maxlength:"30",name:"typeDSignParamName",value:"sign",modelValue:l(t).typeDSignParamName,"onUpdate:modelValue":a[13]||(a[13]=s=>l(t).typeDSignParamName=s),onInput:l(t).changeTypeDSignParamName,class:"w-full"},null,8,["modelValue","onInput"])])]),e("tr",null,[ie,e("td",null,[n(m,{type:"text",maxlength:"30",name:"typeDTimestampParamName",value:"t",modelValue:l(t).typeDTimestampParamName,"onUpdate:modelValue":a[14]||(a[14]=s=>l(t).typeDTimestampParamName=s),onInput:l(t).changeTypeDTimestampParamName,class:"w-full"},null,8,["modelValue","onInput"])])]),e("tr",null,[me,e("td",null,[n(y,null,{default:o(()=>[n(m,{type:"text",maxlength:"8",name:"typeDLife",value:"30",style:{width:"7em"},modelValue:l(t).policy.params.life,"onUpdate:modelValue":a[15]||(a[15]=s=>l(t).policy.params.life=s)},null,8,["modelValue"]),n(h,null,{default:o(()=>[ue]),_:1})]),_:1}),pe])])],512),[[r,l(t).type=="typeD"]]),p(e("tbody",null,[e("tr",null,[re,e("td",null,[n(b,{"v-users":l(t).policy.params.users},null,8,["v-users"])])]),e("tr",null,[e("td",de,[e("a",{href:"",onClick:a[16]||(a[16]=d(s=>l(t).showMoreBasicAuthOptions(),["prevent"]))},[i("更多基本认证选项"),e("i",{class:T(["ui icon angle",{up:l(t).moreBasicAuthOptionsVisible,down:!l(t).moreBasicAuthOptionsVisible}])},null,2)])])]),p(e("tr",null,[ce,e("td",null,[n(m,{type:"text",name:"basicAuthRealm",value:"",maxlength:"100",class:"w-full",modelValue:l(t).policy.params.realm,"onUpdate:modelValue":a[17]||(a[17]=s=>l(t).policy.params.realm=s)},null,8,["modelValue"])])],512),[[r,l(t).moreBasicAuthOptionsVisible]]),p(e("tr",null,[ye,e("td",null,[n(m,{type:"text",name:"basicAuthCharset",style:{width:"6em"},modelValue:l(t).policy.params.charset,"onUpdate:modelValue":a[18]||(a[18]=s=>l(t).policy.params.charset=s),maxlength:"50"},null,8,["modelValue"]),e("p",he,[i("类似于 "),n(f,null,{default:o(()=>[i("utf-8")]),_:1}),i(" 。 ")])])],512),[[r,l(t).moreBasicAuthOptionsVisible]])],512),[[r,l(t).type=="basicAuth"]]),p(e("tbody",null,[e("tr",null,[fe,e("td",null,[n(m,{type:"text",name:"subRequestURL",maxlength:"1024",modelValue:l(t).policy.params.url,"onUpdate:modelValue":a[19]||(a[19]=s=>l(t).policy.params.url=s),class:"w-full"},null,8,["modelValue"]),_e])]),e("tr",null,[Ve,e("td",null,[n(_,{name:"subRequestFollowRequest",value:1,modelValue:l(t).subRequestFollowRequest,"onUpdate:modelValue":a[20]||(a[20]=s=>l(t).subRequestFollowRequest=s)},{default:o(()=>[i("同当前请求一致")]),_:1},8,["modelValue"]),i("     "),n(_,{name:"subRequestFollowRequest",value:0,modelValue:l(t).subRequestFollowRequest,"onUpdate:modelValue":a[21]||(a[21]=s=>l(t).subRequestFollowRequest=s)},{default:o(()=>[i("自定义")]),_:1},8,["modelValue"]),p(e("div",ge,[n(x),n(A,{name:"subRequestMethod",modelValue:l(t).policy.params.method,"onUpdate:modelValue":a[22]||(a[22]=s=>l(t).policy.params.method=s)},{default:o(()=>[n(c,{value:""},{default:o(()=>[i("[请选择]")]),_:1}),n(c,{value:"POST"},{default:o(()=>[i("POST")]),_:1}),n(c,{value:"GET"},{default:o(()=>[i("GET")]),_:1}),n(c,{value:"PUT"},{default:o(()=>[i("PUT")]),_:1}),n(c,{value:"HEAD"},{default:o(()=>[i("HEAD")]),_:1})]),_:1},8,["modelValue"])],512),[[r,l(t).subRequestFollowRequest==0]])])])],512),[[r,l(t).type=="subRequest"]]),e("tbody",null,[e("tr",null,[e("td",Se,[n($)])])]),p(e("tbody",null,[e("tr",null,[De,e("td",null,[n(R,{name:"exts","v-values":l(t).policy.params.exts},null,8,["v-values"]),e("p",Te,[i("如果不为空，则表示只有这些扩展名的文件才需要鉴权；扩展名需要包含点符号（.），比如 "),n(f,null,{default:o(()=>[i(".png")]),_:1})])])]),e("tr",null,[xe,e("td",null,[n(U,{"v-domains":l(t).policy.params.domains},null,8,["v-domains"]),Pe])]),e("tr",null,[ve,e("td",null,[n(B,{name:"isOn",value:"1",modelValue:l(t).policy.isOn,"onUpdate:modelValue":a[23]||(a[23]=s=>l(t).policy.isOn=s)},null,8,["modelValue"])])])],512),[[r,l(t).moreOptionsVisible]])]),_:1}),n(C)]),_:1},8,["onSuccess"])]),_:1}))}};export{st as default};
